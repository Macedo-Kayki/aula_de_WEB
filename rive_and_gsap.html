<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rive + GSAP WOW</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://unpkg.com/@rive-app/canvas@2.19.0"></script>

<style>
body {
  margin: 0;
  height: 400vh;
  background: linear-gradient(120deg,#050505,#0b0b22,#000);
  overflow-x: hidden;
  perspective: 1800px;
  font-family: sans-serif;
}
.scene {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  overflow: visible;
  transform-style: preserve-3d;
}
.riveBox {
  position: absolute;
  width: 480px; height: 480px;
  top: 50%; left: 50%;
  transform: translate(-50%,-50%) scale(0.6) rotateY(0deg);
  filter: blur(20px);
  opacity: 0;
}
.layer {
  position: absolute;
  width: 700px;
  height: 700px;
  background: radial-gradient(circle, rgba(255,255,255,0.08), transparent);
  border-radius: 50%;
  top: 50%; left: 50%;
  transform-style: preserve-3d;
}
#l1 { transform: translate3d(-50%,-50%,-300px) scale(1.6); }
#l2 { transform: translate3d(-50%,-50%,-600px) scale(2.3); }
#l3 { transform: translate3d(-50%,-50%,-900px) scale(3.4); }
.light {
  position: absolute;
  width: 650px; height: 650px;
  background: radial-gradient(circle, rgba(0,140,255,0.3), transparent 70%);
  border-radius: 50%;
  filter: blur(120px);
  top: -20%; left: 20%;
  opacity: 0.3;
  transform: translateZ(-500px);
}
</style>
</head>

<body>

<div class="scene">
  <div class="light"></div>
  <div id="l1" class="layer"></div>
  <div id="l2" class="layer"></div>
  <div id="l3" class="layer"></div>
  <canvas id="rive" class="riveBox"></canvas>
</div>

<script>
gsap.registerPlugin(ScrollTrigger)

const r = new rive.Rive({
  src:"anim.riv",
  canvas:document.getElementById("rive"),
  stateMachines:"Machine",
  autoplay:true,
  onLoad:() => {
    const p = r.stateMachineInputs("Machine").find(x=>x.name==="progress")

    gsap.to(".riveBox",{
      opacity:1,
      scale:1,
      rotationY:55,
      filter:"blur(0px)",
      duration:2,
      ease:"power4.out",
      scrollTrigger:{
        trigger:"body",
        start:"top top",
        end:"20% top",
        scrub:true
      }
    })

    gsap.to(".riveBox",{
      y:-300,
      rotationX:25,
      scrollTrigger:{
        trigger:"body",
        start:"0% top",
        end:"200% top",
        scrub:true,
        onUpdate:e=>p.value=e.progress
      }
    })

    gsap.to("#l1",{y:-200,scale:2.1,scrollTrigger:{trigger:"body",start:"0% top",end:"200% top",scrub:true}})
    gsap.to("#l2",{y:-350,scale:3.1,scrollTrigger:{trigger:"body",start:"0% top",end:"200% top",scrub:true}})
    gsap.to("#l3",{y:-520,scale:4.6,scrollTrigger:{trigger:"body",start:"0% top",end:"200% top",scrub:true}})
    gsap.to(".light",{x:150,y:80,opacity:0.7,scrollTrigger:{trigger:"body",start:"0% top",end:"200% top",scrub:true}})
  }
})

document.addEventListener("mousemove",e=>{
  const x=(e.clientX/window.innerWidth-0.5)*40
  const y=(e.clientY/window.innerHeight-0.5)*40
  gsap.to(".scene",{rotationY:x,rotationX:-y,duration:1.2,ease:"power2.out"})
})
</script>

</body>
</html>